åœ¨ Linux ç¯å¢ƒä¸‹è°ƒè¯• C/C++ ä»£ç æ˜¯å¼€å‘ä¸­éå¸¸å¸¸è§ä¸”é‡è¦çš„ç¯èŠ‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„è°ƒè¯•å·¥å…·é“¾å’Œæ–¹æ³•ä½“ç³»ï¼Œé€‚åˆä»æ–°æ‰‹åˆ°è¿›é˜¶ä½¿ç”¨ã€‚

---

## ğŸ›  å¸¸è§è°ƒè¯•å·¥å…·æ€»è§ˆ

| å·¥å…·                    | ä½œç”¨           | ç‰¹ç‚¹                   |
| --------------------- | ------------ | -------------------- |
| `gdb`                 | æ–­ç‚¹è°ƒè¯•å™¨        | åŠŸèƒ½å¼ºå¤§ï¼ŒCLI æ“ä½œï¼Œé€‚åˆæ·±åº¦è°ƒè¯•   |
| `lldb`                | LLVM çš„è°ƒè¯•å™¨    | ç±»ä¼¼ gdbï¼ŒClang ç”¨æˆ·æ¨è    |
| `valgrind`            | å†…å­˜é”™è¯¯æ£€æµ‹å·¥å…·     | æ£€æµ‹å†…å­˜æ³„æ¼ã€è¶Šç•Œã€æœªåˆå§‹åŒ–ä½¿ç”¨     |
| `strace`              | ç³»ç»Ÿè°ƒç”¨è·Ÿè¸ªå·¥å…·     | æŸ¥çœ‹ç¨‹åºè°ƒç”¨äº†å“ªäº›ç³»ç»Ÿè°ƒç”¨        |
| `ltrace`              | åº“å‡½æ•°è°ƒç”¨è·Ÿè¸ªå·¥å…·    | è·Ÿè¸ªåŠ¨æ€åº“å‡½æ•°              |
| `perf` / `gprof`      | æ€§èƒ½åˆ†æå·¥å…·       | æ€§èƒ½ç“¶é¢ˆã€å‡½æ•°è€—æ—¶            |
| `addr2line`           | åœ°å€è½¬æºç         | ç»“åˆ core dump ä½¿ç”¨      |
| `ASan`/`UBSan`/`TSan` | Sanitizer ç³»åˆ— | ç¼–è¯‘æœŸå¼€å¯ï¼Œè¿è¡Œæ—¶æŠ¥é”™ï¼Œå¿«é€Ÿå‘ç° bug |
| `core dump` + `gdb`   | å´©æºƒæ—¶ä¿å­˜è°ƒè¯•ä¿¡æ¯    | è°ƒè¯• release ç¨‹åºå¸¸ç”¨      |
| `gdb-dashboard`       | gdb å¢å¼º UI    | è§†è§‰æ›´å‹å¥½ï¼Œæ”¯æŒ TUI         |

---

## ğŸ§ª æœ€å¸¸ç”¨è°ƒè¯•æ–¹å¼è¯¦è§£

### 1. ä½¿ç”¨ `gdb` è¿›è¡Œæ–­ç‚¹è°ƒè¯•

#### ç¼–è¯‘æ—¶å¼€å¯è°ƒè¯•ä¿¡æ¯ï¼š

```bash
g++ -g main.cpp -o main
```

#### å¯åŠ¨è°ƒè¯•å™¨ï¼š

```bash
gdb ./main
```

#### å¸¸ç”¨å‘½ä»¤ï¼š

```gdb
break main       # è®¾ç½®æ–­ç‚¹
run              # å¯åŠ¨ç¨‹åº
next             # å•æ­¥è·³è¿‡
step             # å•æ­¥è¿›å…¥å‡½æ•°
print var        # æ‰“å°å˜é‡
backtrace        # æŸ¥çœ‹å‡½æ•°è°ƒç”¨æ ˆ
info locals      # æŸ¥çœ‹å½“å‰å‡½æ•°çš„å±€éƒ¨å˜é‡
continue         # ç»§ç»­è¿è¡Œ
quit             # é€€å‡º
```

---

### 2. ä½¿ç”¨ `valgrind` æ£€æŸ¥å†…å­˜é—®é¢˜

```bash
valgrind --leak-check=full ./main
```

* æ£€æŸ¥å†…å­˜æ³„æ¼
* æ£€æŸ¥è®¿é—®æœªåˆå§‹åŒ–å†…å­˜
* æ£€æŸ¥æ•°ç»„è¶Šç•Œï¼ˆé…åˆ `-g`ï¼‰

---

### 3. ä½¿ç”¨ Sanitizerï¼ˆæ¨èï¼‰

#### å¼€å¯ AddressSanitizerï¼š

```bash
g++ -fsanitize=address -g main.cpp -o main
./main
```

* è¿è¡Œæ—¶è‡ªåŠ¨æç¤ºï¼šé‡æŒ‡é’ˆã€å†…å­˜è¶Šç•Œã€double free ç­‰

#### å…¶ä»– Sanitizerï¼š

| Sanitizer | ç¼–è¯‘å‚æ•°                   | ä½œç”¨    |
| --------- | ---------------------- | ----- |
| ASan      | `-fsanitize=address`   | å†…å­˜é”™è¯¯  |
| TSan      | `-fsanitize=thread`    | æ•°æ®ç«äº‰  |
| UBSan     | `-fsanitize=undefined` | æœªå®šä¹‰è¡Œä¸º |

---

### 4. æ‰“å¼€ core dump æ–‡ä»¶è°ƒè¯•

#### å¯ç”¨ core æ–‡ä»¶ç”Ÿæˆï¼š

```bash
ulimit -c unlimited
```

#### ç¨‹åºå´©æºƒåä¼šç”Ÿæˆ `core` æ–‡ä»¶ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è°ƒè¯•ï¼š

```bash
gdb ./main core
```

ç„¶åæŸ¥çœ‹å´©æºƒä½ç½®ï¼š

```gdb
bt           # backtrace
frame 0      # æŸ¥çœ‹ç¬¬0å¸§
list         # æŸ¥çœ‹æºç 
```

---

### 5. ä½¿ç”¨ `strace` è·Ÿè¸ªç³»ç»Ÿè°ƒç”¨

```bash
strace ./main
```

* è·Ÿè¸ª `open`, `read`, `write`, `mmap`, `brk`, `futex` ç­‰è°ƒç”¨ï¼Œå®šä½ crash æˆ–å¡é¡¿

---

## âœ… å®æˆ˜å»ºè®®ä¸æŠ€å·§

1. **debug æ„å»ºå•ç‹¬ä¸€å¥— build ç›®å½•ï¼š**

   ```bash
   mkdir build-debug && cd build-debug
   cmake -DCMAKE_BUILD_TYPE=Debug ..
   make
   ```

2. **å‡½æ•°è¾“å‡ºæ—¥å¿—é…åˆè°ƒè¯•å™¨åŒä¿é™©ã€‚**

3. **ç¼–è¯‘å¼€å¯ `-Wall -Wextra -Werror`ã€‚**

4. **å–„ç”¨ `assert()` å’Œæ—¥å¿—æ¨¡å—è¿›è¡Œè°ƒè¯•å®šä½ã€‚**

5. **å¤šçº¿ç¨‹ç¨‹åºå»ºè®®å¼€å¯ `-fsanitize=thread` æ£€æµ‹æ•°æ®ç«äº‰ã€‚**

---

## ğŸ”§ GUI å·¥å…·ï¼ˆå¯é€‰ï¼‰

| å·¥å…·             | ç®€ä»‹                  |
| -------------- | ------------------- |
| `vscode + gdb` | é…ç½® launch.json æ”¯æŒæ–­ç‚¹ |
| `CLion`        | è‡ªå¸¦è°ƒè¯•å™¨ï¼Œä½“éªŒæœ€ä½³          |
| `gdbgui`       | Web UI for gdb      |
| `ddd` / `cgdb` | TUI ç•Œé¢              |

---

## ğŸ“¦ ç¤ºä¾‹ä»£ç åŠè°ƒè¯•æ¼”ç¤ºï¼ˆå¯é€‰æä¾›ï¼‰

å¦‚æœä½ æœ‰ä¸€æ®µå´©æºƒ/è¡Œä¸ºå¼‚å¸¸çš„ C/C++ ä»£ç ï¼Œæˆ‘å¯ä»¥ç°åœºç»™å‡ºï¼š

* ç¼–è¯‘é€‰é¡¹
* gdb/valgrind/asan è°ƒè¯•ç¤ºä¾‹
* å¦‚ä½•æŸ¥çœ‹åŸå› 
