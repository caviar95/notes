C++ æ„å»ºç³»ç»Ÿæ˜¯æ•´ä¸ª C++ è½¯ä»¶å¼€å‘æµç¨‹ä¸­çš„åŸºç¡€éƒ¨åˆ†ï¼Œå®ƒè¦†ç›–äº†æºç ç»„ç»‡ã€ä¾èµ–ç®¡ç†ã€ç¼–è¯‘ã€é“¾æ¥ã€æ„å»ºå·¥å…·ç­‰å¤šä¸ªå±‚é¢ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„ C++ æ„å»ºçŸ¥è¯†å›¾è°±ï¼ˆçŸ¥è¯†å›¾ï¼‰ï¼Œå¯ç”¨äºç³»ç»Ÿå­¦ä¹ å’Œé¢è¯•å‡†å¤‡ï¼š
ğŸ§  C++ æ„å»ºçŸ¥è¯†å›¾è°±
1. ğŸ“ æºç ç»„ç»‡ç»“æ„

    å•ä¸€æºæ–‡ä»¶ vs å¤šæ–‡ä»¶é¡¹ç›®

    æ¨¡å—åˆ’åˆ†ï¼ˆé™æ€åº“ / åŠ¨æ€åº“ / å¯æ‰§è¡Œç¨‹åºï¼‰

    include / src / lib / bin / test ç›®å½•ç»“æ„è§„èŒƒ

    æ¥å£ä¸å®ç°åˆ†ç¦»ï¼š.h / .cpp

    é¡¹ç›®åˆ†å±‚ï¼ˆcore / utils / api / platform ç­‰ï¼‰

2. ğŸ§° æ„å»ºå·¥å…·é“¾åŸºç¡€

    ç¼–è¯‘å™¨ï¼ˆCompilerï¼‰

        GCC / Clang / MSVC

        ç¼–è¯‘é˜¶æ®µï¼šé¢„å¤„ç† â†’ ç¼–è¯‘ â†’ æ±‡ç¼– â†’ é“¾æ¥

    é“¾æ¥å™¨ï¼ˆLinkerï¼‰

        é™æ€é“¾æ¥ vs åŠ¨æ€é“¾æ¥

        ä¾èµ–è§£æï¼šç¬¦å·æŸ¥æ‰¾ / ç¬¦å·å†²çª / å¤šé‡å®šä¹‰

    æ„å»ºå·¥å…·ï¼ˆBuild Systemï¼‰

        æ‰‹å·¥ Makefile

        è‡ªåŠ¨æ„å»ºç³»ç»Ÿï¼š

            CMakeï¼ˆä¸»æµï¼‰

            Mesonã€Bazelã€Ninja

            QMakeï¼ˆQt é¡¹ç›®ï¼‰

3. ğŸ—ï¸ CMake ä½“ç³»ç»“æ„ï¼ˆä¸»æµæ¨èï¼‰

    CMakeLists.txt æ–‡ä»¶ç»„æˆ

    æ ¸å¿ƒå‘½ä»¤ï¼š

        project(), add_executable(), add_library()

        target_include_directories(), target_link_libraries()

        target_compile_options(), set(CMAKE_CXX_STANDARD 17)

    æ„å»ºç›®å½•åˆ†ç¦»ï¼ˆout-of-source buildï¼‰

    å¤šå¹³å°æ”¯æŒï¼ˆWindows/Linux/Macï¼‰

    å¤šé…ç½®æ”¯æŒï¼ˆDebug / Release / RelWithDebInfoï¼‰

4. ğŸ”— é“¾æ¥ä¸ä¾èµ–ç®¡ç†

    é™æ€åº“ï¼ˆ.a / .libï¼‰ vs åŠ¨æ€åº“ï¼ˆ.so / .dllï¼‰

    é“¾æ¥é¡ºåºã€ä¾èµ–æ’åº

    LD_LIBRARY_PATH / rpath / runpath

    å¯¼å‡ºç¬¦å·æ§åˆ¶ï¼ˆ__attribute__((visibility("default")))ï¼‰

    å¤´æ–‡ä»¶ä¾èµ–éš”ç¦»ï¼ˆPIMPL Idiomï¼‰

5. ğŸ“¦ åŒ…ç®¡ç†å·¥å…·ï¼ˆç°ä»£ C++ è¶‹åŠ¿ï¼‰

    vcpkg / Conan / CPM.cmake

    ç³»ç»ŸåŒ…ç®¡ç†ï¼ˆapt, yumï¼‰ vs æºç æ‹‰å–

    find_package() å’Œ FetchContent

    è·¨å¹³å°ä¾èµ–ç»Ÿä¸€æ–¹æ¡ˆ

6. ğŸ§ª æµ‹è¯•ä¸æ„å»ºé›†æˆ

    å•å…ƒæµ‹è¯•æ¡†æ¶ï¼ˆGoogle Test, Catch2, doctestï¼‰

    CMake é›†æˆæµ‹è¯•æ¨¡å—ï¼ˆenable_testing(), add_test())

    æŒç»­é›†æˆï¼ˆCIï¼‰ï¼šGitHub Actions, GitLab CI, Jenkins

7. ğŸ› ï¸ ç¼–è¯‘ä¼˜åŒ–æŠ€å·§

    ç¼–è¯‘åŠ é€Ÿï¼š

        ccache

        Ninjaï¼ˆå¹¶è¡Œæ„å»ºï¼‰

        unity buildï¼ˆåˆå¹¶å¤´æ–‡ä»¶ï¼‰

    ç¼–è¯‘é€‰é¡¹ä¼˜åŒ–ï¼š

        -O2 / -O3 / -g / -Wall

        -march=native / -flto / -fvisibility=hidden

    åˆ†å¸ƒå¼ç¼–è¯‘ï¼ˆdistcc, iceccï¼‰

8. ğŸ“„ ç¼–è¯‘è°ƒè¯•å·¥å…·é“¾

    ç¼–è¯‘ä¿¡æ¯æŸ¥çœ‹ï¼šnm, objdump, readelf, ldd

    ä¾èµ–åˆ†æå·¥å…·ï¼šlddtree, strace, lsof

    ç¼–è¯‘é—®é¢˜æ’æŸ¥ï¼šundefined reference, multiple definition, ODR è¿å

9. ğŸ§© æ¨¡å—åŒ–æ„å»ºï¼ˆè¿›é˜¶ï¼‰

    C++20 Modules æ”¯æŒç°çŠ¶

    CMake å¯¹æ¨¡å—æ”¯æŒï¼ˆå®éªŒæ€§ï¼‰

    é™æ€åº“æ‹†åˆ†ä¸å…¬å…±æ¥å£æå–

    å­é¡¹ç›®æ„å»ºä¸ add_subdirectory()

10. ğŸ” å®‰å…¨ & å¯ç§»æ¤æ„å»º

    ç¦æ­¢æœªä½¿ç”¨ç¬¦å·å¯¼å‡º

    è·¨å¹³å°å…¼å®¹æ€§æ„å»ºï¼ˆå®æ§åˆ¶ã€ifdef ç®¡ç†ï¼‰

    å®‰å…¨ç¼–è¯‘é€‰é¡¹ï¼š-fstack-protector, -D_FORTIFY_SOURCE, -Werror

ğŸ“Œ æ¨èå®è·µè·¯çº¿å›¾
é˜¶æ®µ	å†…å®¹	å·¥å…·
å…¥é—¨	ç¼–å†™ç®€å•å¤šæ–‡ä»¶é¡¹ç›®ï¼Œæ‰‹å†™ Makefile	gcc / make
åˆçº§	ä½¿ç”¨ CMake ç®¡ç†é™æ€åº“å’Œå¯æ‰§è¡Œç¨‹åº	CMake / Ninja
ä¸­çº§	å¼•å…¥ GTestã€åˆ†æ¨¡å—æ„å»ºã€ä¾èµ–ç®¡ç†	vcpkg / Conan
é«˜çº§	æ„å»ºå¤§å‹é¡¹ç›®ã€æ·»åŠ  CI/CDã€è·¨å¹³å°	GitHub Actions / cross-compile
æ¶æ„	å¼€æºæ¡†æ¶æºç æ„å»ºåˆ†æï¼ˆå¦‚ brpc, protobufï¼‰	CMake æ·±åº¦ä½¿ç”¨

ä»¥ä¸‹æ˜¯ **C++ æ„å»ºç³»ç»Ÿç›¸å…³çš„çŸ¥è¯†å›¾è°±ï¼ˆçŸ¥è¯†å›¾ï¼‰**ï¼Œæ¶µç›–ä»åŸºæœ¬ç¼–è¯‘é“¾æ¥åˆ°ç°ä»£æ„å»ºç³»ç»Ÿã€è·¨å¹³å°æ”¯æŒã€æ„å»ºä¼˜åŒ–ã€ä¾èµ–ç®¡ç†ç­‰æ ¸å¿ƒå†…å®¹ï¼š

---

## ğŸŒ C++ æ„å»ºç³»ç»ŸçŸ¥è¯†å›¾è°±

```text
C++ æ„å»ºç³»ç»Ÿ
â”œâ”€â”€ 1. ç¼–è¯‘ä¸é“¾æ¥åŸºç¡€
â”‚   â”œâ”€â”€ é¢„å¤„ç†ï¼šå®å±•å¼€ã€å¤´æ–‡ä»¶åŒ…å«
â”‚   â”œâ”€â”€ ç¼–è¯‘ï¼š.cpp â†’ .oï¼ˆæ±‡ç¼–â†’æœºå™¨ç ï¼‰
â”‚   â”œâ”€â”€ æ±‡ç¼–ï¼š.s æ–‡ä»¶
â”‚   â”œâ”€â”€ é“¾æ¥ï¼šå¤šä¸ª .o â†’ å¯æ‰§è¡Œæ–‡ä»¶ / é™æ€åº“ / åŠ¨æ€åº“
â”‚   â””â”€â”€ å¸¸è§å·¥å…·ï¼šgcc/g++, clang++, ld, ar, nm, objdump
â”‚
â”œâ”€â”€ 2. ç¼–è¯‘å•å…ƒä¸ä¾èµ–å…³ç³»
â”‚   â”œâ”€â”€ Translation Unitï¼ˆæ¯ä¸ª .cpp æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ å¤´æ–‡ä»¶åŒ…å«çš„å‰¯ä½œç”¨
â”‚   â”œâ”€â”€ å‰å‘å£°æ˜ vs åŒ…å«
â”‚   â”œâ”€â”€ include guard / #pragma once
â”‚   â””â”€â”€ å¤´æ–‡ä»¶ä¾èµ–ç®¡ç†å·¥å…·ï¼šinclude-what-you-use
â”‚
â”œâ”€â”€ 3. æ„å»ºç³»ç»Ÿç±»å‹
â”‚   â”œâ”€â”€ æ‰‹åŠ¨æ„å»ºï¼šå‘½ä»¤è¡Œ g++/clang++
â”‚   â”œâ”€â”€ Makefileï¼ˆGNU Makeï¼‰
â”‚   â”œâ”€â”€ CMakeï¼ˆç°ä»£ä¸»æµï¼‰
â”‚   â”œâ”€â”€ Ninjaï¼ˆé«˜é€Ÿæ„å»ºå·¥å…·ï¼Œä¸ CMake é…åˆï¼‰
â”‚   â”œâ”€â”€ Mesonã€Bazelã€Buckï¼ˆå¤§å‹é¡¹ç›®æ„å»ºç³»ç»Ÿï¼‰
â”‚   â””â”€â”€ IDE å†…å»ºæ„å»ºç³»ç»Ÿï¼ˆVisual Studio/MSBuildï¼‰
â”‚
â”œâ”€â”€ 4. CMake æ„å»ºç³»ç»Ÿï¼ˆé‡ç‚¹ï¼‰
â”‚   â”œâ”€â”€ åŸºæœ¬è¯­æ³•ä¸ç»“æ„
â”‚   â”‚   â”œâ”€â”€ cmake_minimum_required / project()
â”‚   â”‚   â”œâ”€â”€ add_executable / add_library
â”‚   â”‚   â”œâ”€â”€ target_include_directories / target_link_libraries
â”‚   â”‚   â””â”€â”€ target_compile_options / target_compile_definitions
â”‚   â”œâ”€â”€ æ„å»ºç±»å‹ï¼šDebug / Release / RelWithDebInfo
â”‚   â”œâ”€â”€ ç¼–è¯‘å™¨æ£€æµ‹ä¸é€‰é¡¹æ§åˆ¶
â”‚   â”œâ”€â”€ å­æ¨¡å—ä¸å­é¡¹ç›®ï¼šadd_subdirectory / FetchContent
â”‚   â”œâ”€â”€ å¤–éƒ¨é¡¹ç›®æ”¯æŒï¼šExternalProject_Add
â”‚   â””â”€â”€ å®‰è£…ä¸å¯¼å‡ºï¼šinstall(), export(), config file ç”Ÿæˆ
â”‚
â”œâ”€â”€ 5. æ„å»ºä¼˜åŒ–
â”‚   â”œâ”€â”€ å¤šçº¿ç¨‹æ„å»ºï¼šmake -j / ninja
â”‚   â”œâ”€â”€ é¢„ç¼–è¯‘å¤´ï¼ˆPCHï¼‰
â”‚   â”œâ”€â”€ Unity Buildï¼ˆåˆå¹¶å¤šä¸ª .cppï¼‰
â”‚   â”œâ”€â”€ LTOï¼ˆé“¾æ¥æ—¶ä¼˜åŒ–ï¼‰
â”‚   â””â”€â”€ ccache / sccacheï¼ˆæ„å»ºç¼“å­˜ï¼‰
â”‚
â”œâ”€â”€ 6. åº“ç®¡ç†ä¸ä¾èµ–ç®¡ç†
â”‚   â”œâ”€â”€ æ‰‹åŠ¨å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼ˆinclude/libï¼‰
â”‚   â”œâ”€â”€ CMake find_package
â”‚   â”œâ”€â”€ FetchContent / add_subdirectory
â”‚   â”œâ”€â”€ vcpkg / Conanï¼ˆåŒ…ç®¡ç†å·¥å…·ï¼‰
â”‚   â””â”€â”€ pkg-configï¼ˆLinux ä¸‹å¸¸ç”¨ï¼‰
â”‚
â”œâ”€â”€ 7. è·¨å¹³å°æ„å»ºä¸äº¤å‰ç¼–è¯‘
â”‚   â”œâ”€â”€ Toolchain file
â”‚   â”œâ”€â”€ Windows / Linux / macOS / Android / iOS
â”‚   â”œâ”€â”€ MinGW / MSVC / Clang / ARM Toolchain
â”‚   â””â”€â”€ CMake çš„å¹³å°é€‚é…èƒ½åŠ›
â”‚
â”œâ”€â”€ 8. è‡ªåŠ¨åŒ–ä¸æŒç»­é›†æˆ
â”‚   â”œâ”€â”€ CI å·¥å…·ï¼šGitHub Actions, GitLab CI, Jenkins, Azure DevOps
â”‚   â”œâ”€â”€ æ„å»ºç¼“å­˜ï¼šccacheã€sccache
â”‚   â”œâ”€â”€ é™æ€åˆ†æé›†æˆï¼šclang-tidy, cppcheck
â”‚   â”œâ”€â”€ å•å…ƒæµ‹è¯•é›†æˆï¼šgtest + CTest
â”‚   â””â”€â”€ æ„å»ºäº§ç‰©å‘å¸ƒï¼šCMake install + packagingï¼ˆCPackï¼‰
â”‚
â””â”€â”€ 9. æ„å»ºé—®é¢˜æ’æŸ¥
    â”œâ”€â”€ undefined reference / multiple definition
    â”œâ”€â”€ include path é”™è¯¯
    â”œâ”€â”€ é“¾æ¥é¡ºåºé—®é¢˜ï¼ˆé™æ€åº“ï¼‰
    â”œâ”€â”€ CMake ä¾èµ–æœªæ­£ç¡®ä¼ é€’
    â”œâ”€â”€ ABI ä¸å…¼å®¹ï¼ˆGCC vs Clangï¼‰
    â””â”€â”€ æ—¥å¿—å·¥å…·ï¼šVERBOSE=1, make -n, ninja -v, CMAKE_VERBOSE_MAKEFILE
```

---

## âœ… æ¨èå­¦ä¹ è·¯å¾„

1. **æŒæ¡ç¼–è¯‘é“¾æ¥åŸç†**
2. **å­¦ä¼šä½¿ç”¨ CMake ç®¡ç†ä¸­å°å‹é¡¹ç›®**
3. **äº†è§£å¦‚ä½•å¼•å…¥/é“¾æ¥å¤–éƒ¨åº“ï¼ˆvcpkg/Conanï¼‰**
4. **æ„å»ºä¼˜åŒ–ï¼šå¤šçº¿ç¨‹ + ccache + PCH**
5. **å®è·µè·¨å¹³å°æ„å»ºä¸äº¤å‰ç¼–è¯‘**
6. **å¼•å…¥ CI/CDï¼ˆGitHub Actions + CMake + gtestï¼‰**

---

